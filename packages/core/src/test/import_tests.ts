import {it} from "mocha";
import {parseImport} from "../imports/imports";
import * as assert from "assert";

describe('Import Functionality', () => {
    it('Should recognize shortlinks', () => {
        const result = parseImport("https://xivgear.app/#/sl/583af709-becb-43b8-aea7-3ae2459d58d8");
        assert.equal(result.importType, 'shortlink');
        assert.equal(result['rawUuid'], '583af709-becb-43b8-aea7-3ae2459d58d8');
    });
    it('Should recognize share-style shortlinks', () => {
        const result = parseImport("https://share.xivgear.app/share/583af709-becb-43b8-aea7-3ae2459d58d8");
        assert.equal(result.importType, 'shortlink');
        assert.equal(result['rawUuid'], '583af709-becb-43b8-aea7-3ae2459d58d8');
    });
    it('Should recognize etro links', () => {
        const result = parseImport("https://etro.gg/gearset/ae3151cd-68b8-4cc5-b03b-a195ed80cb4b");
        assert.equal(result.importType, 'etro');
        assert.deepStrictEqual(result['rawUuids'], ['ae3151cd-68b8-4cc5-b03b-a195ed80cb4b']);
    });
    it('Should recognize multiple etro links', () => {
        const result = parseImport("https://etro.gg/gearset/ae3151cd-68b8-4cc5-b03b-a195ed80cb4b\nhttps://etro.gg/gearset/ae3151cd-68b8-4cc5-b03b-a195ed80cb4c\nhttps://etro.gg/gearset/ae3151cd-68b8-4cc5-b03b-a195ed80cb4d");
        assert.equal(result.importType, 'etro');
        assert.deepStrictEqual(result['rawUuids'], ['ae3151cd-68b8-4cc5-b03b-a195ed80cb4b', 'ae3151cd-68b8-4cc5-b03b-a195ed80cb4c', 'ae3151cd-68b8-4cc5-b03b-a195ed80cb4d']);
    });
    it('Should recognize viewsheet URLs', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport("https://xivgear.app/#/viewsheet/{\"name\"%3A\"6.55 Savage SGE BiS\"%2C\"sets\"%3A[{\"name\"%3A\"2.43 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33933}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.44 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40893%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.55) Slower Relic Option\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.45 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.46 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33933}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.47 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Neck\"%3A{\"id\"%3A40153%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.4) With even more piety and a slower GCD%2C this set should give you no problems with MP.\"%2C\"relicStatMemory\"%3A{}}]%2C\"level\"%3A90%2C\"job\"%3A\"SGE\"%2C\"partyBonus\"%3A5%2C\"race\"%3A\"Helion\"%2C\"sims\"%3A[{\"stub\"%3A\"pr-sim\"%2C\"settings\"%3A{}%2C\"name\"%3A\"Dmg%2F100p\"}%2C{\"stub\"%3A\"sge-sheet-sim\"%2C\"settings\"%3A{\"hasBard\"%3Atrue%2C\"hasScholar\"%3Atrue%2C\"hasDragoon\"%3Atrue%2C\"rezPerMin\"%3A0%2C\"diagPerMin\"%3A0%2C\"progPerMin\"%3A0%2C\"eDiagPerMin\"%3A0%2C\"eProgPerMin\"%3A0%2C\"toxPerMin\"%3A0}%2C\"name\"%3A\"SGE Sheet Sim\"}]%2C\"itemDisplaySettings\"%3A{\"minILvl\"%3A640%2C\"maxILvl\"%3A999%2C\"minILvlFood\"%3A640%2C\"maxILvlFood\"%3A999%2C\"higherRelics\"%3Atrue}%2C\"mfni\"%3Afalse%2C\"mfp\"%3A[\"spellspeed\"%2C\"crit\"%2C\"dhit\"%2C\"determination\"%2C\"piety\"]%2C\"mfMinGcd\"%3A2.05%2C\"description\"%3A\"Sage's Best-in-slot gear sets for Anabaseios\"}");
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize importsheet URLs', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport("https://xivgear.app/#/importsheet/{\"name\"%3A\"6.55 Savage SGE BiS\"%2C\"sets\"%3A[{\"name\"%3A\"2.43 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33933}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.44 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40893%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.55) Slower Relic Option\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.45 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.46 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33933}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.47 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Neck\"%3A{\"id\"%3A40153%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.4) With even more piety and a slower GCD%2C this set should give you no problems with MP.\"%2C\"relicStatMemory\"%3A{}}]%2C\"level\"%3A90%2C\"job\"%3A\"SGE\"%2C\"partyBonus\"%3A5%2C\"race\"%3A\"Helion\"%2C\"sims\"%3A[{\"stub\"%3A\"pr-sim\"%2C\"settings\"%3A{}%2C\"name\"%3A\"Dmg%2F100p\"}%2C{\"stub\"%3A\"sge-sheet-sim\"%2C\"settings\"%3A{\"hasBard\"%3Atrue%2C\"hasScholar\"%3Atrue%2C\"hasDragoon\"%3Atrue%2C\"rezPerMin\"%3A0%2C\"diagPerMin\"%3A0%2C\"progPerMin\"%3A0%2C\"eDiagPerMin\"%3A0%2C\"eProgPerMin\"%3A0%2C\"toxPerMin\"%3A0}%2C\"name\"%3A\"SGE Sheet Sim\"}]%2C\"itemDisplaySettings\"%3A{\"minILvl\"%3A640%2C\"maxILvl\"%3A999%2C\"minILvlFood\"%3A640%2C\"maxILvlFood\"%3A999%2C\"higherRelics\"%3Atrue}%2C\"mfni\"%3Afalse%2C\"mfp\"%3A[\"spellspeed\"%2C\"crit\"%2C\"dhit\"%2C\"determination\"%2C\"piety\"]%2C\"mfMinGcd\"%3A2.05%2C\"description\"%3A\"Sage's Best-in-slot gear sets for Anabaseios\"}");
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize viewset URLs', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport("https://xivgear.app/#/viewset/{\"name\"%3A\"6.55 Savage SGE BiS\"%2C\"sets\"%3A[{\"name\"%3A\"2.43 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33933}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.44 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40893%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.55) Slower Relic Option\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.45 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.46 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33933}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.47 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Neck\"%3A{\"id\"%3A40153%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.4) With even more piety and a slower GCD%2C this set should give you no problems with MP.\"%2C\"relicStatMemory\"%3A{}}]%2C\"level\"%3A90%2C\"job\"%3A\"SGE\"%2C\"partyBonus\"%3A5%2C\"race\"%3A\"Helion\"%2C\"sims\"%3A[{\"stub\"%3A\"pr-sim\"%2C\"settings\"%3A{}%2C\"name\"%3A\"Dmg%2F100p\"}%2C{\"stub\"%3A\"sge-sheet-sim\"%2C\"settings\"%3A{\"hasBard\"%3Atrue%2C\"hasScholar\"%3Atrue%2C\"hasDragoon\"%3Atrue%2C\"rezPerMin\"%3A0%2C\"diagPerMin\"%3A0%2C\"progPerMin\"%3A0%2C\"eDiagPerMin\"%3A0%2C\"eProgPerMin\"%3A0%2C\"toxPerMin\"%3A0}%2C\"name\"%3A\"SGE Sheet Sim\"}]%2C\"itemDisplaySettings\"%3A{\"minILvl\"%3A640%2C\"maxILvl\"%3A999%2C\"minILvlFood\"%3A640%2C\"maxILvlFood\"%3A999%2C\"higherRelics\"%3Atrue}%2C\"mfni\"%3Afalse%2C\"mfp\"%3A[\"spellspeed\"%2C\"crit\"%2C\"dhit\"%2C\"determination\"%2C\"piety\"]%2C\"mfMinGcd\"%3A2.05%2C\"description\"%3A\"Sage's Best-in-slot gear sets for Anabaseios\"}");
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize importset URLs', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport("https://xivgear.app/#/importset/{\"name\"%3A\"6.55 Savage SGE BiS\"%2C\"sets\"%3A[{\"name\"%3A\"2.43 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33933}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.44 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40893%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.55) Slower Relic Option\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.45 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.46 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33933}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.47 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Neck\"%3A{\"id\"%3A40153%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.4) With even more piety and a slower GCD%2C this set should give you no problems with MP.\"%2C\"relicStatMemory\"%3A{}}]%2C\"level\"%3A90%2C\"job\"%3A\"SGE\"%2C\"partyBonus\"%3A5%2C\"race\"%3A\"Helion\"%2C\"sims\"%3A[{\"stub\"%3A\"pr-sim\"%2C\"settings\"%3A{}%2C\"name\"%3A\"Dmg%2F100p\"}%2C{\"stub\"%3A\"sge-sheet-sim\"%2C\"settings\"%3A{\"hasBard\"%3Atrue%2C\"hasScholar\"%3Atrue%2C\"hasDragoon\"%3Atrue%2C\"rezPerMin\"%3A0%2C\"diagPerMin\"%3A0%2C\"progPerMin\"%3A0%2C\"eDiagPerMin\"%3A0%2C\"eProgPerMin\"%3A0%2C\"toxPerMin\"%3A0}%2C\"name\"%3A\"SGE Sheet Sim\"}]%2C\"itemDisplaySettings\"%3A{\"minILvl\"%3A640%2C\"maxILvl\"%3A999%2C\"minILvlFood\"%3A640%2C\"maxILvlFood\"%3A999%2C\"higherRelics\"%3Atrue}%2C\"mfni\"%3Afalse%2C\"mfp\"%3A[\"spellspeed\"%2C\"crit\"%2C\"dhit\"%2C\"determination\"%2C\"piety\"]%2C\"mfMinGcd\"%3A2.05%2C\"description\"%3A\"Sage's Best-in-slot gear sets for Anabaseios\"}");
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize raw sheet JSON', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport(json);
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize raw set JSON', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport(json);
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize bis link', () => {
        const result = parseImport('foo.bar/bis/sge/endwalker/dsr');
        assert.equal(result.importType, 'bis');
        assert.equal(result['path'][0], 'sge');
        assert.equal(result['path'][1], 'endwalker');
        assert.equal(result['path'][2], 'dsr');
    })
});
describe('Import Functionality (New)', () => {
    it('Should recognize shortlinks', () => {
        const result = parseImport("https://xivgear.app/?page=sl|583af709-becb-43b8-aea7-3ae2459d58d8");
        assert.equal(result.importType, 'shortlink');
        assert.equal(result['rawUuid'], '583af709-becb-43b8-aea7-3ae2459d58d8');
    });
    it('Should recognize share-style shortlinks', () => {
        const result = parseImport("https://share.xivgear.app/?page=share|583af709-becb-43b8-aea7-3ae2459d58d8");
        assert.equal(result.importType, 'shortlink');
        assert.equal(result['rawUuid'], '583af709-becb-43b8-aea7-3ae2459d58d8');
    });
    it('Should recognize shortlinks (escaped)', () => {
        const result = parseImport("https://xivgear.app/?page=sl%7C583af709-becb-43b8-aea7-3ae2459d58d8");
        assert.equal(result.importType, 'shortlink');
        assert.equal(result['rawUuid'], '583af709-becb-43b8-aea7-3ae2459d58d8');
    });
    it('Should recognize share-style shortlinks (escaped)', () => {
        const result = parseImport("https://share.xivgear.app/?page=share%7C583af709-becb-43b8-aea7-3ae2459d58d8");
        assert.equal(result.importType, 'shortlink');
        assert.equal(result['rawUuid'], '583af709-becb-43b8-aea7-3ae2459d58d8');
    });
    it('Should recognize viewsheet URLs', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport("https://xivgear.app/?page=viewsheet|{\"name\"%3A\"6.55 Savage SGE BiS\"%2C\"sets\"%3A[{\"name\"%3A\"2.43 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33933}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.44 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40893%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.55) Slower Relic Option\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.45 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.46 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33933}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.47 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Neck\"%3A{\"id\"%3A40153%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.4) With even more piety and a slower GCD%2C this set should give you no problems with MP.\"%2C\"relicStatMemory\"%3A{}}]%2C\"level\"%3A90%2C\"job\"%3A\"SGE\"%2C\"partyBonus\"%3A5%2C\"race\"%3A\"Helion\"%2C\"sims\"%3A[{\"stub\"%3A\"pr-sim\"%2C\"settings\"%3A{}%2C\"name\"%3A\"Dmg%2F100p\"}%2C{\"stub\"%3A\"sge-sheet-sim\"%2C\"settings\"%3A{\"hasBard\"%3Atrue%2C\"hasScholar\"%3Atrue%2C\"hasDragoon\"%3Atrue%2C\"rezPerMin\"%3A0%2C\"diagPerMin\"%3A0%2C\"progPerMin\"%3A0%2C\"eDiagPerMin\"%3A0%2C\"eProgPerMin\"%3A0%2C\"toxPerMin\"%3A0}%2C\"name\"%3A\"SGE Sheet Sim\"}]%2C\"itemDisplaySettings\"%3A{\"minILvl\"%3A640%2C\"maxILvl\"%3A999%2C\"minILvlFood\"%3A640%2C\"maxILvlFood\"%3A999%2C\"higherRelics\"%3Atrue}%2C\"mfni\"%3Afalse%2C\"mfp\"%3A[\"spellspeed\"%2C\"crit\"%2C\"dhit\"%2C\"determination\"%2C\"piety\"]%2C\"mfMinGcd\"%3A2.05%2C\"description\"%3A\"Sage's Best-in-slot gear sets for Anabaseios\"}");
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize importsheet URLs', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport("https://xivgear.app/?page=importsheet|{\"name\"%3A\"6.55 Savage SGE BiS\"%2C\"sets\"%3A[{\"name\"%3A\"2.43 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33933}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.44 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40893%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.55) Slower Relic Option\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.45 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.46 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33933}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.47 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Neck\"%3A{\"id\"%3A40153%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.4) With even more piety and a slower GCD%2C this set should give you no problems with MP.\"%2C\"relicStatMemory\"%3A{}}]%2C\"level\"%3A90%2C\"job\"%3A\"SGE\"%2C\"partyBonus\"%3A5%2C\"race\"%3A\"Helion\"%2C\"sims\"%3A[{\"stub\"%3A\"pr-sim\"%2C\"settings\"%3A{}%2C\"name\"%3A\"Dmg%2F100p\"}%2C{\"stub\"%3A\"sge-sheet-sim\"%2C\"settings\"%3A{\"hasBard\"%3Atrue%2C\"hasScholar\"%3Atrue%2C\"hasDragoon\"%3Atrue%2C\"rezPerMin\"%3A0%2C\"diagPerMin\"%3A0%2C\"progPerMin\"%3A0%2C\"eDiagPerMin\"%3A0%2C\"eProgPerMin\"%3A0%2C\"toxPerMin\"%3A0}%2C\"name\"%3A\"SGE Sheet Sim\"}]%2C\"itemDisplaySettings\"%3A{\"minILvl\"%3A640%2C\"maxILvl\"%3A999%2C\"minILvlFood\"%3A640%2C\"maxILvlFood\"%3A999%2C\"higherRelics\"%3Atrue}%2C\"mfni\"%3Afalse%2C\"mfp\"%3A[\"spellspeed\"%2C\"crit\"%2C\"dhit\"%2C\"determination\"%2C\"piety\"]%2C\"mfMinGcd\"%3A2.05%2C\"description\"%3A\"Sage's Best-in-slot gear sets for Anabaseios\"}");
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize viewset URLs', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport("https://xivgear.app/?page=viewset|{\"name\"%3A\"6.55 Savage SGE BiS\"%2C\"sets\"%3A[{\"name\"%3A\"2.43 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33933}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.44 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40893%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.55) Slower Relic Option\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.45 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.46 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33933}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.47 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Neck\"%3A{\"id\"%3A40153%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.4) With even more piety and a slower GCD%2C this set should give you no problems with MP.\"%2C\"relicStatMemory\"%3A{}}]%2C\"level\"%3A90%2C\"job\"%3A\"SGE\"%2C\"partyBonus\"%3A5%2C\"race\"%3A\"Helion\"%2C\"sims\"%3A[{\"stub\"%3A\"pr-sim\"%2C\"settings\"%3A{}%2C\"name\"%3A\"Dmg%2F100p\"}%2C{\"stub\"%3A\"sge-sheet-sim\"%2C\"settings\"%3A{\"hasBard\"%3Atrue%2C\"hasScholar\"%3Atrue%2C\"hasDragoon\"%3Atrue%2C\"rezPerMin\"%3A0%2C\"diagPerMin\"%3A0%2C\"progPerMin\"%3A0%2C\"eDiagPerMin\"%3A0%2C\"eProgPerMin\"%3A0%2C\"toxPerMin\"%3A0}%2C\"name\"%3A\"SGE Sheet Sim\"}]%2C\"itemDisplaySettings\"%3A{\"minILvl\"%3A640%2C\"maxILvl\"%3A999%2C\"minILvlFood\"%3A640%2C\"maxILvlFood\"%3A999%2C\"higherRelics\"%3Atrue}%2C\"mfni\"%3Afalse%2C\"mfp\"%3A[\"spellspeed\"%2C\"crit\"%2C\"dhit\"%2C\"determination\"%2C\"piety\"]%2C\"mfMinGcd\"%3A2.05%2C\"description\"%3A\"Sage's Best-in-slot gear sets for Anabaseios\"}");
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize importset URLs', () => {
        const json = '{"name":"6.55 Savage SGE BiS","sets":[{"name":"2.43 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33933}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance","relicStatMemory":{}},{"name":"2.44 Relic Set","items":{"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40893,"materia":[{"id":33932},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33942},{"id":33932}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33933},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Weapon":{"id":40949,"materia":[],"relicStats":{"dhit":0,"crit":306,"spellspeed":72,"determination":306,"piety":0}},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.55) Slower Relic Option","relicStatMemory":{}},{"name":"2.45 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40148,"materia":[{"id":33932},{"id":33932}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39876,"description":"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.","relicStatMemory":{}},{"name":"2.46 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33931}]},"Neck":{"id":40228,"materia":[{"id":33932},{"id":33932}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33933}]}},"food":39876,"description":"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.","relicStatMemory":{}},{"name":"2.47 Non-Relic","items":{"Weapon":{"id":40182,"materia":[{"id":33931},{"id":33931}]},"Head":{"id":40135,"materia":[{"id":33931},{"id":33932}]},"Body":{"id":40211,"materia":[{"id":33931},{"id":33931}]},"Hand":{"id":40137,"materia":[{"id":33931},{"id":33931}]},"Legs":{"id":40138,"materia":[{"id":33931},{"id":33931}]},"Feet":{"id":40214,"materia":[{"id":33931},{"id":33931}]},"Ears":{"id":40223,"materia":[{"id":33942},{"id":33942}]},"Neck":{"id":40153,"materia":[{"id":33942},{"id":33942}]},"Wrist":{"id":40233,"materia":[{"id":33931},{"id":33931}]},"RingLeft":{"id":40163,"materia":[{"id":33931},{"id":33931}]},"RingRight":{"id":40088,"materia":[{"id":33931},{"id":33931}]}},"food":39872,"description":"(6.4) With even more piety and a slower GCD, this set should give you no problems with MP.","relicStatMemory":{}}],"level":90,"job":"SGE","partyBonus":5,"race":"Helion","sims":[{"stub":"pr-sim","settings":{},"name":"Dmg/100p"},{"stub":"sge-sheet-sim","settings":{"hasBard":true,"hasScholar":true,"hasDragoon":true,"rezPerMin":0,"diagPerMin":0,"progPerMin":0,"eDiagPerMin":0,"eProgPerMin":0,"toxPerMin":0},"name":"SGE Sheet Sim"}],"itemDisplaySettings":{"minILvl":640,"maxILvl":999,"minILvlFood":640,"maxILvlFood":999,"higherRelics":true},"mfni":false,"mfp":["spellspeed","crit","dhit","determination","piety"],"mfMinGcd":2.05,"description":"Sage\'s Best-in-slot gear sets for Anabaseios"}';
        const result = parseImport("https://xivgear.app/?page=importset|{\"name\"%3A\"6.55 Savage SGE BiS\"%2C\"sets\"%3A[{\"name\"%3A\"2.43 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33933}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.55) 2.43 GCD Set with Relic - Thanks to Slasher on The Balance\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.44 Relic Set\"%2C\"items\"%3A{\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40893%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33932}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33933}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Weapon\"%3A{\"id\"%3A40949%2C\"materia\"%3A[]%2C\"relicStats\"%3A{\"dhit\"%3A0%2C\"crit\"%3A306%2C\"spellspeed\"%3A72%2C\"determination\"%3A306%2C\"piety\"%3A0}}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.55) Slower Relic Option\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.45 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40148%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) - Same as WHM 2.45. Lowest piety but highest DPS.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.46 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33931}]}%2C\"Neck\"%3A{\"id\"%3A40228%2C\"materia\"%3A[{\"id\"%3A33932}%2C{\"id\"%3A33932}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33933}]}}%2C\"food\"%3A39876%2C\"description\"%3A\"(6.4) This set is slightly slower and has more piety. This should fix any MP economy issues you may be having.\"%2C\"relicStatMemory\"%3A{}}%2C{\"name\"%3A\"2.47 Non-Relic\"%2C\"items\"%3A{\"Weapon\"%3A{\"id\"%3A40182%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Head\"%3A{\"id\"%3A40135%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33932}]}%2C\"Body\"%3A{\"id\"%3A40211%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Hand\"%3A{\"id\"%3A40137%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Legs\"%3A{\"id\"%3A40138%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Feet\"%3A{\"id\"%3A40214%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"Ears\"%3A{\"id\"%3A40223%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Neck\"%3A{\"id\"%3A40153%2C\"materia\"%3A[{\"id\"%3A33942}%2C{\"id\"%3A33942}]}%2C\"Wrist\"%3A{\"id\"%3A40233%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingLeft\"%3A{\"id\"%3A40163%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}%2C\"RingRight\"%3A{\"id\"%3A40088%2C\"materia\"%3A[{\"id\"%3A33931}%2C{\"id\"%3A33931}]}}%2C\"food\"%3A39872%2C\"description\"%3A\"(6.4) With even more piety and a slower GCD%2C this set should give you no problems with MP.\"%2C\"relicStatMemory\"%3A{}}]%2C\"level\"%3A90%2C\"job\"%3A\"SGE\"%2C\"partyBonus\"%3A5%2C\"race\"%3A\"Helion\"%2C\"sims\"%3A[{\"stub\"%3A\"pr-sim\"%2C\"settings\"%3A{}%2C\"name\"%3A\"Dmg%2F100p\"}%2C{\"stub\"%3A\"sge-sheet-sim\"%2C\"settings\"%3A{\"hasBard\"%3Atrue%2C\"hasScholar\"%3Atrue%2C\"hasDragoon\"%3Atrue%2C\"rezPerMin\"%3A0%2C\"diagPerMin\"%3A0%2C\"progPerMin\"%3A0%2C\"eDiagPerMin\"%3A0%2C\"eProgPerMin\"%3A0%2C\"toxPerMin\"%3A0}%2C\"name\"%3A\"SGE Sheet Sim\"}]%2C\"itemDisplaySettings\"%3A{\"minILvl\"%3A640%2C\"maxILvl\"%3A999%2C\"minILvlFood\"%3A640%2C\"maxILvlFood\"%3A999%2C\"higherRelics\"%3Atrue}%2C\"mfni\"%3Afalse%2C\"mfp\"%3A[\"spellspeed\"%2C\"crit\"%2C\"dhit\"%2C\"determination\"%2C\"piety\"]%2C\"mfMinGcd\"%3A2.05%2C\"description\"%3A\"Sage's Best-in-slot gear sets for Anabaseios\"}");
        assert.equal(result.importType, 'json');
        assert.equal(result['rawData'], json);
    });
    it('Should recognize bis link', () => {
        const result = parseImport('https://xivgear.app/?page=bis|sge|endwalker|dsr');
        assert.equal(result.importType, 'bis');
        assert.equal(result['path'][0], 'sge');
        assert.equal(result['path'][1], 'endwalker');
        assert.equal(result['path'][2], 'dsr');
    })
});
